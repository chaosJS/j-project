<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>carousel-slide</title>
    <link rel="stylesheet" href="./style.css">
</head>


<body>
    <div class="window">
        <div id="slides" class="images">
            <img src="./images/1.jpg">
            <img src="./images/2.jpg">
            <img src="./images/3.jpg">
        </div>
    </div>

    <!-- ver 2.0  -->
    <div id="buttonWrapper" style="text-align: center;">
        <button>1</button>
        <button>2</button>
        <button>3</button>
    </div>
    <!-- ver 2.0 end -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="./main.js"></script>
    <!-- ver 1.0 -->
    <!-- <script>
        let n, imgNum = $(`.images > img`).length;

        init();
        let timer = setInterval(() => {
            handleLeave(
                getImg(n)
            )
                .one('transitionend', (e) => {
                    handleEnter($(e.currentTarget))
                })
            handleCurrent(getImg(n + 1))
            n += 1;
        }, 2000)
        // fix 用户不看页面的时候 setInterval 执行有问题
        $(document).on('visibilitychange', (e) => {
            if (document.hidden) {
                clearInterval(timer)
            } else {
                timer = setInterval(() => {
                    handleLeave(
                        getImg(n)
                    )
                        .one('transitionend', (e) => {
                            handleEnter($(e.currentTarget))
                        })
                    handleCurrent(getImg(n + 1))
                    n += 1;
                }, 2000)
            }
        })





        function x(n) {
            if (n % imgNum === 0) {
                return imgNum;
            }
            return n > imgNum ? n % imgNum : n
        }
        function init() {
            n = 1;
            getImg(n).addClass('current')
                .siblings().addClass('enter');
        }

        function getImg(n) {
            return $(`.images > img:nth-child(${x(n)})`)

        }
        handleCurrent = ($node) => {
            $node.removeClass('enter').addClass('current');
            return $node
        }

        handleLeave = ($node) => {
            $node.removeClass('current')
                .addClass('leave')
            return $node

        }

        handleEnter = ($node) => {
            $node.removeClass('leave')
                .addClass('enter')
            return $node

        }

    </script> -->
    <!-- ver 1.0 end -->
</body>

</html>